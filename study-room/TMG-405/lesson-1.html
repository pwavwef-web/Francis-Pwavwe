<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lesson 1 â€” Nature & Purpose of Visitor Attractions | TMG 405</title>
  <meta name="description" content="TMG 405 Lesson 1: Nature and purpose of visitor attractions in the tourism system â€” definitions, components, purpose and management concepts.">
  <link rel="icon" href="../../favicon.png">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;700;800&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
  <style>
    :root{--fp-dark:#0a0a0f;--fp-primary:#1e40af;--fp-gold:#fbbf24;--fp-accent:#6366f1}
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{background-color:#0a0a0f;color:#f8fafc;font-family:'Inter',sans-serif;min-height:100vh}
    .fp-poppins{font-family:'Poppins',sans-serif}
    .fp-gold{color:#fbbf24}
    .fp-accent{color:#6366f1}
    .fp-muted{color:#94a3b8}
    .badge{display:inline-flex;align-items:center;padding:0.2rem 0.6rem;border-radius:9999px;font-size:0.75rem;font-weight:600;letter-spacing:.04em}
    .content-section{background:#111827;border:1px solid rgba(255,255,255,.07);border-radius:1rem;padding:2rem;margin-bottom:1.5rem}
    .content-section h2{font-family:'Poppins',sans-serif;font-size:1.25rem;font-weight:700;color:#f8fafc;margin-bottom:1rem;display:flex;align-items:center;gap:0.5rem}
    .content-section h3{font-family:'Poppins',sans-serif;font-size:1rem;font-weight:600;color:#e2e8f0;margin:1.25rem 0 0.5rem}
    .content-section p{color:#94a3b8;line-height:1.75;margin-bottom:0.75rem;font-size:0.9375rem}
    .content-section ul{color:#94a3b8;line-height:1.75;padding-left:1.25rem;margin-bottom:0.75rem;font-size:0.9375rem}
    .content-section ul li{margin-bottom:0.4rem}
    .definition-box{background:rgba(99,102,241,.08);border:1px solid rgba(99,102,241,.25);border-radius:0.75rem;padding:1rem 1.25rem;margin:1rem 0}
    .definition-box p{color:#c7d2fe;margin:0;font-style:italic}
    .key-point{background:rgba(251,191,36,.07);border-left:3px solid #fbbf24;padding:0.75rem 1rem;border-radius:0 0.5rem 0.5rem 0;margin:0.75rem 0}
    .key-point p{color:#fde68a;margin:0;font-size:0.875rem}
    /* Quiz styles */
    .quiz-section{background:#0f172a;border:1px solid rgba(99,102,241,.3);border-radius:1rem;padding:2rem}
    .quiz-input{background:#1e293b;border:1px solid rgba(255,255,255,.12);border-radius:0.5rem;color:#f8fafc;padding:0.875rem 1rem;width:100%;font-family:'Inter',sans-serif;font-size:0.9rem;transition:border-color .2s;resize:vertical}
    .quiz-input:focus{outline:none;border-color:#6366f1}
    .quiz-input::placeholder{color:#475569}
    .btn-quiz{display:inline-flex;align-items:center;gap:0.5rem;padding:0.75rem 1.5rem;background:#6366f1;color:#fff;border-radius:0.5rem;font-weight:600;font-family:'Inter',sans-serif;border:none;cursor:pointer;font-size:0.9rem;transition:background .2s,transform .15s}
    .btn-quiz:hover{background:#4f46e5;transform:translateY(-1px)}
    .btn-quiz:disabled{opacity:.5;cursor:not-allowed;transform:none}
    .btn-secondary-quiz{display:inline-flex;align-items:center;gap:0.5rem;padding:0.75rem 1.5rem;background:transparent;color:#a5b4fc;border:1px solid rgba(99,102,241,.4);border-radius:0.5rem;font-weight:600;font-family:'Inter',sans-serif;cursor:pointer;font-size:0.9rem;transition:border-color .2s}
    .btn-secondary-quiz:hover{border-color:#6366f1;color:#fff}
    .question-card{background:#1e293b;border:1px solid rgba(255,255,255,.08);border-radius:0.75rem;padding:1.25rem;margin-bottom:1rem}
    .question-card .q-num{font-size:0.75rem;font-weight:700;color:#6366f1;text-transform:uppercase;letter-spacing:.08em;margin-bottom:0.4rem}
    .question-card .q-text{color:#e2e8f0;font-size:0.9375rem;margin-bottom:0.75rem;font-weight:500}
    .score-badge{display:inline-flex;align-items:center;gap:0.3rem;padding:0.3rem 0.75rem;border-radius:9999px;font-size:0.8rem;font-weight:700}
    .feedback-card{background:#1e293b;border:1px solid rgba(99,102,241,.2);border-radius:0.75rem;padding:1.25rem;margin-bottom:0.75rem}
    .feedback-card .fb-q{color:#c7d2fe;font-size:0.875rem;font-weight:600;margin-bottom:0.4rem}
    .feedback-card .fb-answer{color:#94a3b8;font-size:0.8125rem;margin-bottom:0.5rem}
    .feedback-card .fb-feedback{color:#a5f3fc;font-size:0.8125rem;line-height:1.6}
    .api-key-area{background:#1e293b;border:1px solid rgba(255,255,255,.1);border-radius:0.75rem;padding:1.25rem;margin-bottom:1.5rem}
    .api-key-input{background:#0f172a;border:1px solid rgba(255,255,255,.1);border-radius:0.5rem;color:#f8fafc;padding:0.625rem 0.875rem;font-family:'Inter',sans-serif;font-size:0.875rem;width:100%;transition:border-color .2s}
    .api-key-input:focus{outline:none;border-color:#6366f1}
    .nav-link-lesson{color:#94a3b8;text-decoration:none;font-size:0.875rem;transition:color .2s;display:flex;align-items:center;gap:0.25rem}
    .nav-link-lesson:hover{color:#f8fafc}
    .toc-link{display:block;color:#94a3b8;text-decoration:none;font-size:0.875rem;padding:0.35rem 0;border-bottom:1px solid rgba(255,255,255,.05);transition:color .2s}
    .toc-link:hover{color:#a5b4fc}
    .toc-link:last-child{border-bottom:none}
  </style>
</head>
<body>

<!-- NAV -->
<nav class="fixed top-0 left-0 right-0 z-50 bg-[#0a0a0f]/95 backdrop-blur-md border-b border-white/10">
  <div class="max-w-5xl mx-auto px-4 sm:px-6">
    <div class="flex items-center justify-between h-16">
      <div class="flex items-center gap-2 flex-wrap">
        <a href="../../index.html" class="nav-link-lesson"><i data-lucide="home" class="w-4 h-4"></i></a>
        <span class="text-white/20">/</span>
        <a href="../../study-room/index.html" class="nav-link-lesson">Study Room</a>
        <span class="text-white/20">/</span>
        <a href="index.html" class="nav-link-lesson">TMG 405</a>
        <span class="text-white/20">/</span>
        <span class="text-[#a5b4fc] text-sm font-semibold">Lesson 1</span>
      </div>
      <div class="flex items-center gap-2">
        <a href="lesson-2.html" class="text-xs text-[#6366f1] hover:text-[#a5b4fc] flex items-center gap-1 transition-colors">
          Next <i data-lucide="arrow-right" class="w-3 h-3"></i>
        </a>
      </div>
    </div>
  </div>
</nav>

<!-- MAIN LAYOUT -->
<div class="max-w-5xl mx-auto px-4 sm:px-6 pt-24 pb-20">
  <div class="lg:grid lg:grid-cols-[1fr_260px] lg:gap-10">

    <!-- CONTENT -->
    <main>
      <!-- Lesson Header -->
      <div class="mb-8">
        <div class="flex flex-wrap gap-2 mb-4">
          <span class="badge" style="background:rgba(99,102,241,.15);color:#a5b4fc;border:1px solid rgba(99,102,241,.3)">
            <i data-lucide="book-open" class="w-3 h-3 mr-1"></i> TMG 405 Â· Lesson 1
          </span>
        </div>
        <h1 class="fp-poppins text-3xl sm:text-4xl font-black text-white mb-3 leading-tight">
          The Nature & Purpose of Visitor Attractions in the Tourism System
        </h1>
        <p class="text-[#94a3b8] leading-relaxed mb-4">
          This lesson introduces the fundamental concepts of visitor attractions â€” what they are, 
          why they matter, and how they are managed within the broader tourism system.
        </p>
        <div class="flex flex-wrap gap-4 text-sm fp-muted">
          <span class="flex items-center gap-1"><i data-lucide="clock" class="w-4 h-4"></i> ~30 min read</span>
          <span class="flex items-center gap-1"><i data-lucide="layers" class="w-4 h-4"></i> 4 sub-topics</span>
          <span class="flex items-center gap-1"><i data-lucide="brain" class="w-4 h-4"></i> AI Quiz included</span>
        </div>
      </div>

      <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           SUBTOPIC 1: DEFINITIONS
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <div class="content-section" id="definitions">
        <h2><i data-lucide="bookmark" class="w-5 h-5" style="color:#6366f1"></i> 1.1 Definitions of Visitor Attractions</h2>
        <p>
          A <strong style="color:#e2e8f0">visitor attraction</strong> is a permanent or temporary feature â€” natural, cultural, built, or event-based â€” 
          that motivates people to travel to a specific destination and provides a meaningful experience once they arrive. 
          Visitor attractions are widely regarded as the primary motivators of tourism; without them, destinations would 
          have little appeal to potential tourists.
        </p>

        <div class="definition-box">
          <p>"A visitor attraction is a permanently established excursion destination which is a primary purpose of a visit 
          and which can include or exclude an admission charge." â€” <strong>English Tourism Council (ETC)</strong></p>
        </div>

        <div class="definition-box">
          <p>"Any feature of an area that attracts visitors and could serve as a base for tourism product development." 
          â€” <strong>Leiper (1990)</strong></p>
        </div>

        <div class="definition-box">
          <p>"Visitor attractions are specific places that tourists visit for their own sake, providing amusement, 
          interest, or education." â€” <strong>Middleton (1994)</strong></p>
        </div>

        <h3>Key Elements Shared Across Definitions</h3>
        <ul>
          <li><strong style="color:#e2e8f0">Motivation:</strong> Attractions motivate or influence the decision to visit a destination.</li>
          <li><strong style="color:#e2e8f0">Experience delivery:</strong> They provide value, enjoyment, learning or cultural enrichment.</li>
          <li><strong style="color:#e2e8f0">Focal point:</strong> They give visitors a reason to stop at a particular place.</li>
          <li><strong style="color:#e2e8f0">Economic role:</strong> They generate direct and indirect income for the destination.</li>
        </ul>

        <div class="key-point">
          <p>ðŸ’¡ <strong>Key insight:</strong> Visitor attractions are not simply "nice to have" â€” they are the cornerstone 
          of any tourism destination's appeal and competitive position.</p>
        </div>
      </div>

      <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           SUBTOPIC 2: COMPONENTS
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <div class="content-section" id="components">
        <h2><i data-lucide="puzzle" class="w-5 h-5" style="color:#fbbf24"></i> 1.2 Components of a Visitor Attraction</h2>
        <p>
          Understanding the constituent parts of a visitor attraction helps managers plan, develop and improve the 
          overall visitor experience. Most scholars identify several interlinked components:
        </p>

        <h3>The Core Attraction (Primary Product)</h3>
        <p>
          This is the central feature that provides the primary draw for visitors â€” for example, the wildlife 
          in a safari park, the artefacts in a museum, or the rides in a theme park. Without a compelling 
          core attraction, all other components become irrelevant.
        </p>

        <h3>Supporting Services & Facilities</h3>
        <ul>
          <li><strong style="color:#e2e8f0">Catering &amp; food services:</strong> Restaurants, cafÃ©s, food stalls that add convenience and comfort.</li>
          <li><strong style="color:#e2e8f0">Retail &amp; merchandise:</strong> Gift shops that extend the visitor's engagement and generate revenue.</li>
          <li><strong style="color:#e2e8f0">Accommodation:</strong> On-site or nearby lodging (especially for multi-day attractions).</li>
          <li><strong style="color:#e2e8f0">Transport &amp; accessibility:</strong> Parking, shuttle services, and infrastructure to reach the attraction.</li>
          <li><strong style="color:#e2e8f0">Visitor services:</strong> Information desks, guided tours, audio guides, accessibility aids.</li>
        </ul>

        <h3>The Setting / Environment</h3>
        <p>
          The physical and atmospheric environment in which the attraction is experienced. A natural landscape, 
          an architecturally significant building, or a carefully themed environment can significantly amplify 
          (or diminish) the perceived value of the core attraction.
        </p>

        <h3>The Human Element</h3>
        <p>
          Staff, guides, interpreters and volunteers directly shape the quality of the visitor experience. 
          Their knowledge, attitude, and communication skills are integral components of what makes an 
          attraction memorable.
        </p>

        <h3>Interpretation &amp; Signage</h3>
        <p>
          Explanatory materials â€” panels, labels, digital displays, audio commentary â€” help visitors 
          understand and contextualise what they are seeing, turning a passive observation into active learning.
        </p>

        <div class="key-point">
          <p>ðŸ’¡ Swarbrooke (1995) argues that the components of an attraction must work as a <strong>system</strong>. 
          A world-class exhibit surrounded by poor signage, rude staff, or inadequate parking will still disappoint visitors.</p>
        </div>
      </div>

      <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           SUBTOPIC 3: PURPOSE
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <div class="content-section" id="purpose">
        <h2><i data-lucide="target" class="w-5 h-5" style="color:#34d399"></i> 1.3 Purpose of a Visitor Attraction</h2>
        <p>
          Visitor attractions serve multiple, often overlapping purposes within the tourism system, for communities, 
          economies and individual visitors alike.
        </p>

        <h3>Generating Visitor Flows</h3>
        <p>
          Attractions are catalysts for travel. They drive the movement of tourists to a destination and create 
          demand for complementary services such as accommodation, transport, dining and retail.
        </p>

        <h3>Economic Development</h3>
        <p>
          Beyond admission revenues, visitor attractions generate jobs â€” directly through operations and indirectly 
          through supply chains. Heritage sites, national parks and cultural venues can transform economically 
          marginalised areas into thriving destinations.
        </p>

        <h3>Education &amp; Awareness</h3>
        <p>
          Many attractions â€” particularly museums, science centres, nature reserves and historic sites â€” have 
          explicit educational missions. They preserve and communicate cultural, scientific and historical 
          knowledge to diverse audiences.
        </p>

        <h3>Conservation &amp; Preservation</h3>
        <p>
          Revenue generated from visitor admissions and donations often funds the conservation of natural 
          ecosystems, endangered species, and heritage structures. Attractions can thus align commercial 
          viability with environmental stewardship.
        </p>

        <h3>Social &amp; Community Benefits</h3>
        <p>
          Attractions contribute to community pride, social cohesion, and local identity. Community-owned 
          or community-operated attractions empower local populations and ensure that tourism benefits 
          are distributed more equitably.
        </p>

        <h3>Image &amp; Destination Branding</h3>
        <p>
          Iconic attractions function as destination symbols. The Eiffel Tower, the Pyramids of Giza, 
          or Kakum National Park in Ghana are not merely visitor experiences â€” they shape the perception 
          and global image of their respective destinations.
        </p>

        <div class="key-point">
          <p>ðŸ’¡ A single major attraction (sometimes called an <strong>"anchor attraction"</strong>) can anchor a destination's 
          entire tourism economy and justify the development of extensive infrastructure around it.</p>
        </div>
      </div>

      <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           SUBTOPIC 4: MANAGEMENT CONCEPT
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <div class="content-section" id="management">
        <h2><i data-lucide="settings" class="w-5 h-5" style="color:#f87171"></i> 1.4 The Concept of Visitor Attraction Management</h2>
        <p>
          <strong style="color:#e2e8f0">Visitor attraction management</strong> encompasses the strategic planning, operational delivery and ongoing 
          improvement of all activities associated with running a visitor attraction effectively. It operates 
          at the intersection of hospitality, business management, heritage conservation and experience design.
        </p>

        <h3>Core Management Functions</h3>
        <ul>
          <li><strong style="color:#e2e8f0">Strategic planning:</strong> Setting long-term goals, positioning the attraction in the market, and allocating resources to achieve sustainable growth.</li>
          <li><strong style="color:#e2e8f0">Operations management:</strong> Day-to-day running of the site â€” staffing, safety, maintenance, ticketing and visitor flow.</li>
          <li><strong style="color:#e2e8f0">Marketing:</strong> Promoting the attraction to target audiences through digital, print and experiential channels.</li>
          <li><strong style="color:#e2e8f0">Financial management:</strong> Budgeting, revenue diversification, pricing strategy and cost control.</li>
          <li><strong style="color:#e2e8f0">Visitor experience management:</strong> Continuously improving the quality, accessibility and meaning of the visitor experience.</li>
          <li><strong style="color:#e2e8f0">Human resource management:</strong> Recruiting, training and retaining staff and volunteers who embody the attraction's values.</li>
        </ul>

        <h3>The Balanced Scorecard Approach in Attraction Management</h3>
        <p>
          Modern attraction managers frequently employ multi-dimensional performance frameworks. Success is 
          measured not only by visitor numbers and revenue, but also by visitor satisfaction scores, 
          conservation outcomes, community impact and staff well-being.
        </p>

        <h3>Challenges in Visitor Attraction Management</h3>
        <ul>
          <li>Managing seasonality and fluctuating demand</li>
          <li>Balancing accessibility with conservation needs</li>
          <li>Staying competitive in an evolving experience economy</li>
          <li>Securing funding, especially for public/heritage attractions</li>
          <li>Adapting to technological change and changing visitor expectations</li>
        </ul>

        <div class="key-point">
          <p>ðŸ’¡ Effective visitor attraction management is a continuous cycle of planning, delivery, evaluation 
          and improvement â€” not a one-time exercise.</p>
        </div>
      </div>

      <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           LESSON SUMMARY
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <div style="background:#111827;border:1px solid rgba(251,191,36,.2);border-radius:1rem;padding:1.5rem;margin-bottom:2rem">
        <h2 class="fp-poppins text-base font-bold text-white mb-3 flex items-center gap-2">
          <i data-lucide="check-circle" class="w-5 h-5" style="color:#fbbf24"></i> Lesson Summary
        </h2>
        <ul style="color:#94a3b8;padding-left:1.2rem;line-height:1.8;font-size:0.9rem">
          <li>Visitor attractions are permanent or temporary features that motivate travel and deliver meaningful experiences.</li>
          <li>Components include the core attraction, supporting facilities, the environment, staff, and interpretation systems.</li>
          <li>Their purposes span economic development, education, conservation, community enrichment, and destination branding.</li>
          <li>Visitor attraction management covers strategic, operational, marketing, financial and experiential dimensions.</li>
        </ul>
      </div>

      <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           AI QUIZ SECTION
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <div class="quiz-section" id="quiz">
        <div class="flex items-center gap-3 mb-2">
          <div class="w-10 h-10 rounded-xl flex items-center justify-center" style="background:rgba(99,102,241,.2)">
            <i data-lucide="brain" class="w-5 h-5" style="color:#a5b4fc"></i>
          </div>
          <div>
            <h2 class="fp-poppins text-xl font-bold text-white">AI-Powered Quiz</h2>
            <p class="text-xs fp-muted">Powered by Google Gemini</p>
          </div>
        </div>
        <p class="text-sm fp-muted mb-6 leading-relaxed">
          Test your understanding of Lesson 1. The AI will generate questions based on the lesson content, 
          evaluate your answers, and award marks with personalised feedback.
        </p>

        <!-- API Key Setup -->
        <div class="api-key-area" id="apiKeyArea">
          <div class="flex items-start gap-3">
            <i data-lucide="key" class="w-5 h-5 mt-0.5" style="color:#fbbf24;flex-shrink:0"></i>
            <div class="flex-1">
              <p class="text-sm font-semibold text-white mb-1">Google Gemini API Key</p>
              <p class="text-xs fp-muted mb-3">
                Enter your free Gemini API key to enable AI quizzes. 
                Get one at <a href="https://aistudio.google.com/app/apikey" target="_blank" rel="noopener" 
                class="text-[#6366f1] hover:underline">aistudio.google.com</a>. 
                Your key is stored locally in your browser and never sent anywhere except Google's servers.
              </p>
              <div class="flex gap-2">
                <input type="password" id="apiKeyInput" class="api-key-input" placeholder="AIzaSy...">
                <button onclick="saveApiKey()" class="btn-quiz" style="white-space:nowrap;padding:0.625rem 1rem">Save Key</button>
              </div>
              <p id="apiKeyMsg" class="text-xs mt-2 hidden"></p>
            </div>
          </div>
        </div>

        <!-- Quiz Controls -->
        <div id="quizControls">
          <div class="flex flex-wrap gap-3 mb-6">
            <button id="generateBtn" onclick="generateQuiz()" class="btn-quiz">
              <i data-lucide="sparkles" class="w-4 h-4"></i> Generate Quiz Questions
            </button>
            <button id="resetBtn" onclick="resetQuiz()" class="btn-secondary-quiz hidden">
              <i data-lucide="refresh-cw" class="w-4 h-4"></i> New Quiz
            </button>
          </div>

          <!-- Questions Container -->
          <div id="questionsContainer" class="hidden">
            <div id="questionsList"></div>
            <button id="submitBtn" onclick="submitAnswers()" class="btn-quiz mt-2">
              <i data-lucide="send" class="w-4 h-4"></i> Submit &amp; Get Marks
            </button>
          </div>

          <!-- Results Container -->
          <div id="resultsContainer" class="hidden">
            <div id="scoreDisplay" class="flex items-center gap-4 mb-6 p-4 rounded-xl" style="background:#1e293b"></div>
            <h3 class="fp-poppins text-base font-bold text-white mb-3">Question-by-Question Feedback</h3>
            <div id="feedbackList"></div>
          </div>

          <!-- Status message -->
          <div id="quizStatus" class="hidden text-sm fp-muted flex items-center gap-2 py-2">
            <i data-lucide="loader" class="w-4 h-4 animate-spin"></i>
            <span id="quizStatusText">Loadingâ€¦</span>
          </div>
        </div>
      </div>

      <!-- NAV BETWEEN LESSONS -->
      <div class="flex justify-between items-center mt-10">
        <a href="index.html" class="text-sm text-[#94a3b8] hover:text-white flex items-center gap-1 transition-colors">
          <i data-lucide="arrow-left" class="w-4 h-4"></i> Course Overview
        </a>
        <a href="lesson-2.html" class="btn-quiz">
          Lesson 2 <i data-lucide="arrow-right" class="w-4 h-4"></i>
        </a>
      </div>
    </main>

    <!-- SIDEBAR TABLE OF CONTENTS -->
    <aside class="hidden lg:block">
      <div class="sticky top-24">
        <div style="background:#111827;border:1px solid rgba(255,255,255,.07);border-radius:1rem;padding:1.25rem">
          <p class="text-xs font-semibold tracking-widest fp-muted mb-3 uppercase">Contents</p>
          <a href="#definitions" class="toc-link">1.1 Definitions</a>
          <a href="#components" class="toc-link">1.2 Components</a>
          <a href="#purpose" class="toc-link">1.3 Purpose</a>
          <a href="#management" class="toc-link">1.4 Management Concept</a>
          <a href="#quiz" class="toc-link" style="color:#a5b4fc">ðŸŽ¯ AI Quiz</a>
        </div>
        <div style="background:#111827;border:1px solid rgba(255,255,255,.07);border-radius:1rem;padding:1.25rem;margin-top:1rem">
          <p class="text-xs font-semibold tracking-widest fp-muted mb-3 uppercase">Course Lessons</p>
          <a href="lesson-1.html" class="toc-link" style="color:#a5b4fc;font-weight:600">Lesson 1 (current)</a>
          <a href="lesson-2.html" class="toc-link">Lesson 2</a>
          <a href="lesson-3.html" class="toc-link">Lesson 3</a>
          <a href="lesson-4.html" class="toc-link">Lesson 4</a>
        </div>
      </div>
    </aside>

  </div>
</div>

<!-- FOOTER -->
<footer style="background:#060608;border-top:1px solid rgba(255,255,255,.08);padding:2rem 0">
  <div class="max-w-5xl mx-auto px-4 flex flex-col sm:flex-row items-center justify-between gap-3">
    <p class="text-xs fp-muted">TMG 405 Â· Lesson 1 Â· Visitor Attractions Management</p>
    <a href="index.html" class="text-xs text-[#6366f1] hover:text-[#a5b4fc] transition-colors flex items-center gap-1">
      <i data-lucide="arrow-left" class="w-3 h-3"></i> Back to course
    </a>
  </div>
</footer>

<script>
  lucide.createIcons();

  const LESSON_CONTEXT = `
Lesson: The Nature and Purpose of Visitor Attractions in the Tourism System (TMG 405)

Key topics covered:
1. Definitions of Visitor Attractions
   - ETC definition: a permanently established excursion destination which is a primary purpose of a visit
   - Leiper (1990): any feature of an area that attracts visitors
   - Middleton (1994): specific places tourists visit for their own sake
   - Key elements: motivation, experience delivery, focal point, economic role

2. Components of a Visitor Attraction
   - Core attraction (primary product)
   - Supporting services & facilities (catering, retail, accommodation, transport, visitor services)
   - Setting/environment
   - Human element (staff, guides, interpreters)
   - Interpretation & signage

3. Purpose of a Visitor Attraction
   - Generating visitor flows
   - Economic development (jobs, revenue)
   - Education and awareness
   - Conservation and preservation
   - Social and community benefits
   - Image and destination branding
   - Concept of anchor attraction

4. The Concept of Visitor Attraction Management
   - Strategic planning, operations, marketing, financial management, visitor experience management, HRM
   - Balanced scorecard approach
   - Challenges: seasonality, conservation balance, funding, technology adaptation
`;

  const GEMINI_API_URL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent';

  let generatedQuestions = [];

  function getApiKey() {
    return localStorage.getItem('tmg405_gemini_key') || '';
  }

  function saveApiKey() {
    const key = document.getElementById('apiKeyInput').value.trim();
    const msg = document.getElementById('apiKeyMsg');
    if (!key) {
      msg.textContent = 'Please enter a valid API key.';
      msg.className = 'text-xs mt-2 text-red-400';
      msg.classList.remove('hidden');
      return;
    }
    localStorage.setItem('tmg405_gemini_key', key);
    msg.textContent = 'âœ“ API key saved. You can now generate quizzes.';
    msg.className = 'text-xs mt-2 text-green-400';
    msg.classList.remove('hidden');
    document.getElementById('apiKeyInput').value = '';
  }

  function showStatus(text, show = true) {
    const el = document.getElementById('quizStatus');
    document.getElementById('quizStatusText').textContent = text;
    el.classList.toggle('hidden', !show);
    lucide.createIcons();
  }

  async function callGemini(prompt) {
    const key = getApiKey();
    if (!key) throw new Error('No API key found. Please save your Gemini API key above.');
    const res = await fetch(`${GEMINI_API_URL}?key=${encodeURIComponent(key)}`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        contents: [{ parts: [{ text: prompt }] }],
        generationConfig: { temperature: 0.7, maxOutputTokens: 2048 }
      })
    });
    if (!res.ok) {
      const err = await res.json().catch(() => ({}));
      throw new Error(err?.error?.message || `API error: ${res.status}`);
    }
    const data = await res.json();
    return data.candidates?.[0]?.content?.parts?.[0]?.text || '';
  }

  async function generateQuiz() {
    const btn = document.getElementById('generateBtn');
    btn.disabled = true;
    showStatus('Generating quiz questionsâ€¦');

    try {
      const prompt = `You are an academic lecturer for a Tourism Management course. Based on the following lesson content, generate exactly 5 short-answer quiz questions that test understanding, application and critical thinking. 

${LESSON_CONTEXT}

Return ONLY a valid JSON array in this exact format (no extra text, no markdown code blocks):
[
  {"id": 1, "question": "..."},
  {"id": 2, "question": "..."},
  {"id": 3, "question": "..."},
  {"id": 4, "question": "..."},
  {"id": 5, "question": "..."}
]`;

      const raw = await callGemini(prompt);
      const jsonMatch = raw.match(/\[[\s\S]*\]/);
      if (!jsonMatch) throw new Error('Could not parse questions from AI response.');
      generatedQuestions = JSON.parse(jsonMatch[0]);

      renderQuestions();
      document.getElementById('questionsContainer').classList.remove('hidden');
      document.getElementById('resetBtn').classList.remove('hidden');
      btn.textContent = 'Questions Generated âœ“';
      showStatus('', false);
    } catch (e) {
      showStatus('', false);
      alert('Error generating questions: ' + e.message);
      btn.disabled = false;
    }
  }

  function renderQuestions() {
    const list = document.getElementById('questionsList');
    list.innerHTML = generatedQuestions.map(q => `
      <div class="question-card">
        <div class="q-num">Question ${q.id}</div>
        <div class="q-text">${q.question}</div>
        <textarea class="quiz-input" id="answer_${q.id}" rows="3" 
          placeholder="Type your answer hereâ€¦"></textarea>
      </div>
    `).join('');
  }

  async function submitAnswers() {
    const btn = document.getElementById('submitBtn');
    btn.disabled = true;
    showStatus('Analysing your answers and calculating marksâ€¦');

    const answers = generatedQuestions.map(q => ({
      id: q.id,
      question: q.question,
      answer: (document.getElementById(`answer_${q.id}`)?.value || '').trim()
    }));

    const unanswered = answers.filter(a => !a.answer).length;
    if (unanswered > 0) {
      showStatus('', false);
      if (!confirm(`You have ${unanswered} unanswered question(s). Submit anyway?`)) {
        btn.disabled = false;
        return;
      }
    }

    try {
      const prompt = `You are an academic lecturer for a Tourism Management course. Evaluate the following student answers to quiz questions based on this lesson content:

${LESSON_CONTEXT}

Questions and student answers:
${answers.map(a => `Q${a.id}: ${a.question}\nStudent Answer: ${a.answer || '(no answer provided)'}`).join('\n\n')}

For each question, award marks out of 10 and provide constructive feedback. Then give an overall total out of ${answers.length * 10}.

Return ONLY a valid JSON object in this exact format (no extra text, no markdown):
{
  "totalScore": <number>,
  "totalPossible": ${answers.length * 10},
  "percentage": <number>,
  "grade": "<A/B/C/D/F>",
  "overallFeedback": "<2-3 sentence summary>",
  "results": [
    {"id": 1, "score": <0-10>, "feedback": "<specific feedback>"},
    ...
  ]
}`;

      const raw = await callGemini(prompt);
      const jsonMatch = raw.match(/\{[\s\S]*\}/);
      if (!jsonMatch) throw new Error('Could not parse evaluation from AI response.');
      const evaluation = JSON.parse(jsonMatch[0]);

      renderResults(answers, evaluation);
      document.getElementById('questionsContainer').classList.add('hidden');
      document.getElementById('resultsContainer').classList.remove('hidden');
      showStatus('', false);
      document.getElementById('resultsContainer').scrollIntoView({ behavior: 'smooth', block: 'start' });
    } catch (e) {
      showStatus('', false);
      alert('Error evaluating answers: ' + e.message);
      btn.disabled = false;
    }
  }

  function renderResults(answers, evaluation) {
    const gradeColors = { A: '#34d399', B: '#60a5fa', C: '#fbbf24', D: '#fb923c', F: '#f87171' };
    const col = gradeColors[evaluation.grade] || '#94a3b8';
    const pct = Math.round(evaluation.percentage);

    document.getElementById('scoreDisplay').innerHTML = `
      <div class="text-center px-6 py-2 rounded-xl" style="background:rgba(99,102,241,.12)">
        <div class="fp-poppins text-3xl font-black" style="color:${col}">${evaluation.totalScore}<span class="text-lg text-[#94a3b8]">/${evaluation.totalPossible}</span></div>
        <div class="text-xs fp-muted mt-0.5">Total Score</div>
      </div>
      <div class="text-center px-6 py-2 rounded-xl" style="background:rgba(99,102,241,.12)">
        <div class="fp-poppins text-3xl font-black" style="color:${col}">${pct}%</div>
        <div class="text-xs fp-muted mt-0.5">Percentage</div>
      </div>
      <div class="text-center px-6 py-2 rounded-xl" style="background:rgba(99,102,241,.12)">
        <div class="fp-poppins text-3xl font-black" style="color:${col}">${evaluation.grade}</div>
        <div class="text-xs fp-muted mt-0.5">Grade</div>
      </div>
      <div class="flex-1 text-sm fp-muted leading-relaxed italic">"${evaluation.overallFeedback}"</div>
    `;

    const feedbackList = document.getElementById('feedbackList');
    feedbackList.innerHTML = evaluation.results.map(r => {
      const q = answers.find(a => a.id === r.id);
      const scoreColor = r.score >= 8 ? '#34d399' : r.score >= 6 ? '#60a5fa' : r.score >= 4 ? '#fbbf24' : '#f87171';
      return `<div class="feedback-card">
        <div class="flex items-start justify-between gap-4 mb-2">
          <div class="fb-q">Q${r.id}: ${q?.question || ''}</div>
          <span class="score-badge flex-shrink-0" style="background:rgba(99,102,241,.15);color:${scoreColor};border:1px solid ${scoreColor}33">
            ${r.score}/10
          </span>
        </div>
        <div class="fb-answer"><span style="color:#64748b">Your answer:</span> ${q?.answer || '<em>No answer</em>'}</div>
        <div class="fb-feedback">ðŸ’¬ ${r.feedback}</div>
      </div>`;
    }).join('');
  }

  function resetQuiz() {
    generatedQuestions = [];
    document.getElementById('questionsContainer').classList.add('hidden');
    document.getElementById('resultsContainer').classList.add('hidden');
    document.getElementById('questionsList').innerHTML = '';
    document.getElementById('feedbackList').innerHTML = '';
    document.getElementById('scoreDisplay').innerHTML = '';
    document.getElementById('generateBtn').disabled = false;
    document.getElementById('generateBtn').innerHTML = '<i data-lucide="sparkles" class="w-4 h-4"></i> Generate Quiz Questions';
    document.getElementById('submitBtn').disabled = false;
    document.getElementById('resetBtn').classList.add('hidden');
    showStatus('', false);
    lucide.createIcons();
  }

  // Pre-fill API key if saved
  window.addEventListener('DOMContentLoaded', () => {
    const saved = getApiKey();
    if (saved) {
      document.getElementById('apiKeyMsg').textContent = 'âœ“ API key is saved and ready.';
      document.getElementById('apiKeyMsg').className = 'text-xs mt-2 text-green-400';
      document.getElementById('apiKeyMsg').classList.remove('hidden');
    }
  });
</script>

</body>
</html>
