<!DOCTYPE html>
<html class="dark" lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Analytics — The AZ Podcast Admin</title>
  <link rel="icon" href="../../favicon.png">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
  <style>
    *{box-sizing:border-box}
    body{background:#0a0a0f;color:#f8fafc;font-family:'Inter',sans-serif;min-height:100vh}
    .fp-poppins{font-family:'Poppins',sans-serif}
    .fp-gold{color:#fbbf24}
    .fp-muted{color:#94a3b8}
    .sidebar{width:240px;flex-shrink:0;background:#0d1117;border-right:1px solid rgba(255,255,255,.07);min-height:100vh;padding:1.5rem 0;position:fixed;top:0;left:0;z-index:40}
    .sidebar-link{display:flex;align-items:center;gap:0.75rem;padding:0.6rem 1.25rem;color:#94a3b8;font-size:0.875rem;text-decoration:none;transition:all .2s;border-left:3px solid transparent}
    .sidebar-link:hover{color:#f8fafc;background:rgba(255,255,255,.05)}
    .sidebar-link.active{color:#fbbf24;background:rgba(251,191,36,.07);border-left-color:#fbbf24}
    .main{margin-left:240px;min-height:100vh;padding:2rem}
    .card{background:#111827;border:1px solid rgba(255,255,255,.08);border-radius:1rem}
    .stat-card{background:#111827;border:1px solid rgba(255,255,255,.08);border-radius:0.75rem;padding:1.25rem}
    .bar{height:8px;border-radius:9999px;background:rgba(255,255,255,.07);overflow:hidden}
    .bar-fill{height:100%;border-radius:9999px;transition:width .8s ease}
    @media(max-width:768px){.sidebar{display:none}.main{margin-left:0}}
  </style>
</head>
<body>
<script src="admin-auth.js"></script>
<script>requireAdmin();</script>

<!-- SIDEBAR -->
<aside class="sidebar">
  <div class="px-5 mb-6">
    <p class="text-xs tracking-[0.2em] fp-gold font-semibold fp-poppins mb-0.5">THE AZ PODCAST</p>
    <p class="text-white font-bold fp-poppins text-sm">Admin Panel</p>
  </div>
  <nav>
    <a href="index.html" class="sidebar-link"><i data-lucide="layout-dashboard" class="w-4 h-4"></i> Dashboard</a>
    <a href="upload.html" class="sidebar-link"><i data-lucide="upload-cloud" class="w-4 h-4"></i> Upload Episode</a>
    <a href="manage.html" class="sidebar-link"><i data-lucide="list" class="w-4 h-4"></i> Manage Episodes</a>
    <a href="analytics.html" class="sidebar-link active"><i data-lucide="bar-chart-2" class="w-4 h-4"></i> Analytics</a>
    <a href="settings.html" class="sidebar-link"><i data-lucide="settings" class="w-4 h-4"></i> Settings</a>
    <div style="height:1px;background:rgba(255,255,255,.07);margin:1rem 1.25rem"></div>
    <a href="../index.html" class="sidebar-link"><i data-lucide="radio" class="w-4 h-4"></i> View Podcast</a>
    <a href="javascript:void(0)" onclick="adminLogout()" class="sidebar-link" style="color:#f87171"><i data-lucide="log-out" class="w-4 h-4"></i> Logout</a>
  </nav>
</aside>

<!-- MAIN -->
<main class="main">
  <div class="mb-8">
    <p class="text-xs tracking-[0.2em] fp-muted fp-poppins mb-1">ADMIN TOOLS</p>
    <h1 class="fp-poppins text-2xl font-bold text-white">Analytics</h1>
    <p class="fp-muted text-sm mt-1">Overview of podcast performance. Connect a real analytics provider (Spotify for Podcasters, Chartable, etc.) to see live data.</p>
  </div>

  <!-- NOTICE BANNER -->
  <div class="mb-6 p-4 rounded-xl flex items-start gap-3" style="background:rgba(251,191,36,.08);border:1px solid rgba(251,191,36,.2)">
    <i data-lucide="info" class="w-4 h-4 flex-shrink-0 mt-0.5" style="color:#fbbf24"></i>
    <p class="text-sm" style="color:#fbbf24">These are placeholder stats. Connect your podcast analytics platform (Spotify for Podcasters, Chartable, Podtrac) in Settings to see real data.</p>
  </div>

  <!-- TOP STATS -->
  <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
    <div class="stat-card">
      <div class="flex items-center justify-between mb-2">
        <span class="text-sm fp-muted">Total Plays</span>
        <i data-lucide="play-circle" class="w-4 h-4" style="color:#6366f1"></i>
      </div>
      <p class="fp-poppins text-2xl font-bold text-white">—</p>
      <p class="text-xs fp-muted mt-1">Connect analytics</p>
    </div>
    <div class="stat-card">
      <div class="flex items-center justify-between mb-2">
        <span class="text-sm fp-muted">Subscribers</span>
        <i data-lucide="users" class="w-4 h-4" style="color:#10b981"></i>
      </div>
      <p class="fp-poppins text-2xl font-bold text-white">—</p>
      <p class="text-xs fp-muted mt-1">Connect analytics</p>
    </div>
    <div class="stat-card">
      <div class="flex items-center justify-between mb-2">
        <span class="text-sm fp-muted">Avg Duration</span>
        <i data-lucide="clock" class="w-4 h-4" style="color:#f97316"></i>
      </div>
      <p class="fp-poppins text-2xl font-bold text-white">48m</p>
      <p class="text-xs fp-muted mt-1">Across 6 episodes</p>
    </div>
    <div class="stat-card">
      <div class="flex items-center justify-between mb-2">
        <span class="text-sm fp-muted">Episodes</span>
        <i data-lucide="mic" class="w-4 h-4" style="color:#fbbf24"></i>
      </div>
      <p class="fp-poppins text-2xl font-bold text-white">6</p>
      <p class="text-xs fp-muted mt-1">Season 1</p>
    </div>
  </div>

  <div class="grid lg:grid-cols-2 gap-6">
    <!-- PLATFORM BREAKDOWN -->
    <div class="card p-6">
      <h2 class="fp-poppins font-bold text-white mb-4">Platform Breakdown</h2>
      <p class="text-sm fp-muted mb-5">Connect platforms in Settings to see listener distribution.</p>
      <div class="space-y-4">
        <div>
          <div class="flex justify-between text-sm mb-1.5"><span class="text-white">Spotify</span><span class="fp-muted">—</span></div>
          <div class="bar"><div class="bar-fill" style="width:0%;background:#1db954"></div></div>
        </div>
        <div>
          <div class="flex justify-between text-sm mb-1.5"><span class="text-white">Apple Podcasts</span><span class="fp-muted">—</span></div>
          <div class="bar"><div class="bar-fill" style="width:0%;background:#9333ea"></div></div>
        </div>
        <div>
          <div class="flex justify-between text-sm mb-1.5"><span class="text-white">YouTube</span><span class="fp-muted">—</span></div>
          <div class="bar"><div class="bar-fill" style="width:0%;background:#ef4444"></div></div>
        </div>
        <div>
          <div class="flex justify-between text-sm mb-1.5"><span class="text-white">Website</span><span class="fp-muted">—</span></div>
          <div class="bar"><div class="bar-fill" style="width:0%;background:#6366f1"></div></div>
        </div>
      </div>
    </div>

    <!-- TOP EPISODES -->
    <div class="card p-6">
      <h2 class="fp-poppins font-bold text-white mb-4">Episode Engagement</h2>
      <p class="text-sm fp-muted mb-5">Publish real episodes and connect analytics to track performance per episode.</p>
      <div class="space-y-3" id="episodeEngagement"></div>
    </div>
  </div>

  <!-- TAG BREAKDOWN -->
  <div class="card p-6 mt-6">
    <h2 class="fp-poppins font-bold text-white mb-4">Tag Distribution</h2>
    <p class="text-sm fp-muted mb-5">Topics covered across all current episodes.</p>
    <div class="flex flex-wrap gap-2" id="tagCloud"></div>
  </div>
</main>

<script src="../az-episodes.js"></script>
<script>
  lucide.createIcons();

  // Episode engagement placeholder
  const engContainer = document.getElementById('episodeEngagement');
  engContainer.innerHTML = AZ_EPISODES.map((ep, i) => `
    <div class="flex items-center gap-3">
      <span class="text-xs fp-muted w-5">${i+1}</span>
      <div class="flex-1 min-w-0">
        <p class="text-sm text-white truncate">${ep.title}</p>
        <div class="bar mt-1"><div class="bar-fill" style="width:${Math.max(5,(100 - i*14))}%;background:linear-gradient(90deg,#6366f1,#a5b4fc)"></div></div>
      </div>
      <span class="text-xs fp-muted flex-shrink-0">—</span>
    </div>
  `).join('');

  // Tag cloud
  const tagCount = {};
  AZ_EPISODES.forEach(ep => ep.tags.forEach(t => { tagCount[t] = (tagCount[t]||0)+1; }));
  const tagContainer = document.getElementById('tagCloud');
  tagContainer.innerHTML = Object.entries(tagCount)
    .sort((a,b) => b[1]-a[1])
    .map(([tag, count]) => `<span style="background:rgba(99,102,241,.12);color:#a5b4fc;border:1px solid rgba(99,102,241,.2);padding:0.3rem 0.8rem;border-radius:9999px;font-size:0.8rem;font-weight:500">${tag} <span style="color:#6366f1">${count}</span></span>`)
    .join('');
</script>
</body>
</html>
